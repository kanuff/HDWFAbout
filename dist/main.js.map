{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/sentiment/languages/en/index.js","webpack:///./src/index.js","webpack:///./src/chart.js","webpack:///./src/chart_utils.js","webpack:///./src/query_field.js","webpack:///./src/news.js","webpack:///./config/keys.js","webpack:///./src/sentiment.js","webpack:///./node_modules/sentiment/lib/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/sentiment/lib/tokenize.js","webpack:///./node_modules/sentiment/lib/language-processor.js","webpack:///./node_modules/sentiment/languages/en/scoring-strategy.js","webpack:///./node_modules/sentiment/languages sync ^\\.\\/.*\\/index$"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","labels","require","scoringStrategy","document","addEventListener","props","main","getElementById","secondTitle","chart","Chart","insertBefore","dummyData","build","this","data","margin","top","right","bottom","left","cutoff","good","bad","width","height","svg","d3","select","attr","style","append","today","Date","startDate","setDate","getDate","endDate","dateRange","generateDateRange","xFormat","initialize","selectedDot","x","y","Math","floor","random","datum","keys","push","xdata","ydata","forEach","parseTime","timeParse","xscl","scaleTime","domain","extent","range","x_axis","axisBottom","scale","yscl","scaleLinear","max","min","gX","tickFormat","timeFormat","selectAll","text","area","y0","y1","goodArea","neutralArea","payload","scatterData","total","gY","singleArticleInfo","lineData","mergeLineData","initialize_duration","initialRender","conditionalTitleColor","conditionalBackgroundColor","transition","delay","ease","easeExp","duration","conditionalDisplay","close","modal","on","createDots","enter","dot","fillArticleInfo","conditionalColor","conditionalOpacity","window","open","url","easeElastic","handleArticleScroll","title","highScore","_","articlesContainer","toLocaleDateString","month","day","bigDot","handleDotUX","easeCubic","exit","remove","updateDots","source","description","image","addDay","sortDate","a","b","easeQuad","average","sqrt","abs","attr_value","greaterThan","opacity","speed","intialize_duration","easeLinear","dates","currentDate","date","formattedDate","getFullYear","getMonth","mergedData","assign","unkeyedData","outerDatum","values","flat","sort","scrollIntoView","behavior","block","form","createElement","queryInput","setAttribute","setTimeout","typingWord","appendChild","event","preventDefault","handleTyping","fn","timerId","options","str","length","cycle","setInterval","slice","removeEventListener","clearInput","clearInterval","fetchEverythingFor","then","response","query","articles","processData","render","apiKey","news_api_key","fetchHeadlines","req","Request","console","log","fetch","json","addQuery","sentiment","Sentiment","processingData","article","content","author","urlToImage","contentSentiment","analyze","titleSentiment","comparative","relevance","round","publishedAt","split","score","sortDateDesc","averageDayScores","calculateTotals","count","processedData","averagedData","tokenize","languageProcessor","registerLanguage","languageCode","language","addLanguage","phrase","opts","callback","getLabels","extras","tokens","words","positive","negative","obj","tokenScore","applyScoringStrategy","result","process","nextTick","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","e","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","args","Array","arguments","apply","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","input","toLowerCase","replace","emojis","enLanguage","languages","en","getLanguage","err","cursor","defaultScoringStrategy","negators","prevtoken","map","webpackContext","id","webpackContextResolve","code","resolve"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = {\n    labels: require('./labels.json'),\n    scoringStrategy: require('./scoring-strategy')\n};\n","import './styles/development.css';\nimport Chart from './chart';\nimport queryField from './query_field';\nimport './styles/main.css';\n\n \n\nif (process.env.NODE_ENV !== \"production\") {\n    console.log(\"Development Mode!\");\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const props = {}\n    const main = document.getElementById(\"main\");\n    const secondTitle = document.getElementById(\"second-title\")\n    \n    const chart = new Chart(props)\n    props.chart = chart\n\n    main.insertBefore(queryField(props), secondTitle);\n\n    const dummyData = chart.dummyData();\n    chart.build(dummyData);\n\n})\n","import {\n    conditionalBackgroundColor,\n    conditionalColor,\n    conditionalDisplay,\n    conditionalOpacity,\n    conditionalTitleColor,\n    fillArticleInfo,\n    handleDotUX,\n    generateDateRange,\n    mergeLineData,\n    initialRender,\n    handleArticleScroll\n} from './chart_utils'\n\nexport default class Chart{\n    constructor(props){\n        this.data = props.data\n        this.margin = {\n            top: 30,\n            right: 20,\n            bottom: 30,\n            left: 30,\n        }\n        this.cutoff = 3\n        this.good = this.cutoff\n        this.bad = this.cutoff * -1\n        this.width = 810 - this.margin.left - this.margin.right;\n        this.height = 370 - this.margin.top - this.margin.bottom;\n        this.svg = d3.select('svg')\n            .attr(\"viewBox\", `0 0 ${this.width + this.margin.left + this.margin.right} ${this.height + this.margin.top + this.margin.bottom}`)\n            // .style('background-color', 'rgba(190,190,190,1)')\n            .style('background-color', 'transparent')\n            .append(\"g\")\n            .attr(\"transform\", `translate(${this.margin.left}, ${this.margin.top})`)\n        const today = new Date()\n        this.startDate = new Date(today.setDate(today.getDate() - 31))\n        this.endDate = new Date();\n        this.dateRange = generateDateRange(this.startDate, this.endDate)\n        this.xFormat = \"%b-%d\";\n        this.initialize = true;\n        this.selectedDot = {\"dot\": \"\"};\n    }\n\n    dummyData(){\n        const dummyData = []\n        const dataLength = 31;\n        const mag = 25;\n        for (let x = 0; x < dataLength; x++) {\n            const y = Math.floor(Math.random() * 2 * mag) - mag;\n            const datum = {x:Object.keys(this.dateRange[x])[0], y};\n            dummyData.push(datum);\n        }\n        return dummyData\n    }\n\n    build(data){\n        const { svg, height, width, good, bad, xFormat, margin } = this\n        const xdata = []\n        const ydata = []\n        data.forEach(datum => {\n            xdata.push(datum.x)\n            ydata.push(datum.y)\n        })\n        const parseTime = d3.timeParse(\"%Y-%m-%d\")\n        const xscl = d3.scaleTime()\n            .domain(d3.extent(data, d => { return parseTime(d.x) }))\n            .range([0, width]);\n\n        const x_axis = d3.axisBottom()\n            .scale(xscl)\n\n        const yscl = d3.scaleLinear()\n            .domain([d3.max(ydata), d3.min(ydata)])\n            .range([0, height]);\n\n        // const y_axis = d3.axisLeft()\n        //     .scale(yscl)\n\n        this.gX = svg.append(\"g\")\n            .attr(\"transform\", `translate(0,${(yscl(0))})`)\n            .attr(\"class\", `xaxis`)\n            .call(x_axis)\n\n        svg.select(\".xaxis\")\n            .attr(\"transform\", `translate(0,${yscl(0)})`)\n            .call(x_axis.tickFormat(d3.timeFormat(xFormat)))\n            .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", 9)\n            .attr(\"dy\", \".35em\")\n            .style(\"text-anchor\", \"start\")\n            .style(\"opacity\", 0)\n\n        // this.gY = svg.append(\"g\")\n        //     .attr(\"class\", `yaxis`)\n        //     .call(y_axis.tickSizeOuter(5))\n        //     .selectAll(\"text\").style(\"fill\", \"rgba(0,0,0,0)\")\n\n        //good-label\n        svg.append(\"text\")\n            .attr(\"y\", yscl(good) - 5 )\n            .attr(\"x\", 15)\n            .attr(\"class\", \"good-label\")\n            .attr(\"text-anchor\", \"right\")\n            .style(\"fill\", \"transparent\")\n            .text(\"mostly positive\")\n            // .text(\"+ sentiment\")\n\n        //bad-label\n        svg.append(\"text\")\n            .attr(\"y\", yscl(bad) + 15 )\n            .attr(\"x\", 15)\n            .attr(\"class\", \"bad-label\")\n            .attr(\"text-anchor\", \"right\")\n            .text(\"mostly negative\")\n            // .text(\"- sentiment\")\n        svg.append(\"text\")\n            .attr(\"y\", yscl(0) - 5)\n            .attr(\"x\", 15)\n            .attr(\"class\", \"neutral-label\")\n            .attr(\"text-anchor\", \"right\")\n            .text(\"neutral\")\n\n        //build good-line\n        svg.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", yscl(good))\n            .attr(\"x2\", width)\n            .attr(\"y2\", yscl(good))\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke-width\", \"1px\")\n            .attr(\"class\", \"good-line\")\n            .style(\"stroke-dasharray\", (\"3, 3\"));\n\n        // build bad-line\n        svg.append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", yscl(bad))\n            .attr(\"x2\", width)\n            .attr(\"y2\", yscl(bad))\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", \"transparent\")\n            .attr(\"stroke-width\", \"1px\")\n            .attr(\"class\", \"bad-line\")\n            .style(\"stroke-dasharray\", (\"3, 3\"))\n\n\n        d3.select(\".article-info\")\n            .style(\"box-shadow\", \"1px 1px 5px 0px black\")\n\n        svg.append(\"rect\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"class\", \"zoom-window\")\n            .style(\"fill\", \"transparent\")\n\n        const area = d3.area()\n            .x(function (d) { return xscl(parseTime(d.x)) })\n            .y0(height)\n            .y1(yscl(bad))\n\n        svg.append(\"path\")\n            .data([data])\n            .attr(\"class\", \"area\")\n            .attr(\"d\", area)\n            .style(\"fill\", \"transparent\")\n            // .style(\"fill\", \"rgba(255,0,0,0.1)\")\n\n        const goodArea = d3.area()\n            .x(function (d) { return xscl(parseTime(d.x)) })\n            .y0(0)\n            .y1(yscl(good))\n\n        svg.append(\"path\")\n            .data([data])\n            .attr(\"class\", \"good-area\")\n            .attr(\"d\", goodArea)\n            .style(\"fill\", \"transparent\")\n            // .style(\"fill\", \"rgba(0,255,0,0.1)\")\n\n        const neutralArea = d3.area()\n            .x(function (d) { return xscl(parseTime(d.x)) })\n            .y0(yscl(good))\n            .y1(yscl(bad))\n\n        svg.append(\"path\")\n            .data([data])\n            .attr(\"class\", \"neutral-area\")\n            .attr(\"d\", neutralArea)\n            .style(\"fill\", \"transparent\")\n            // .style(\"fill\", \"rgba(255,255,255,0.1)\")\n    }\n\n    render(payload){\n        const { scatterData, total } = payload\n        const { svg, height, width, good, bad, xFormat, margin, gX, gY, selectedDot } = this\n        const ydata = []\n        const singleArticleInfo = d3.select(\".article-info-container\")\n        const lineData = mergeLineData(this.dateRange, payload.lineData)\n        let initialize_duration\n        if (this.initialize){\n            initialize_duration = 2500\n        } else {\n            initialize_duration = 0\n        }\n        this.initialize = initialRender(svg, initialize_duration)\n        conditionalTitleColor(total);\n        conditionalBackgroundColor(total);\n\n        scatterData.forEach(datum => {\n            ydata.push(datum.y)\n        })\n\n        const parseTime = d3.timeParse(\"%Y-%m-%d\")\n       \n        const xscl = d3.scaleTime()\n            .domain(d3.extent(lineData, d => { return parseTime(d.x) }))\n            .range([0, width]);\n\n        const x_axis = d3.axisBottom()\n            .scale(xscl)\n            \n        const yscl = d3.scaleLinear()\n            .domain([d3.max(ydata)*1.05, d3.min(ydata)*1.05])\n            .range([0, height]);\n\n        // const y_axis = d3.axisLeft()\n        //     // .tickValues([bad, 0, good])\n        //     .tickFormat( function(d,i) {\n        //         // if(d === bad) return \"negative\"\n        //         if(d === 0) return \"moderate\"\n        //         // if(d === good) return \"positive\"\n        //     })\n        //     .tickValues([0])\n        //     .scale(yscl)\n\n\n\n        svg.select(\".xaxis\")\n                .transition()\n            .delay(initialize_duration)\n                .ease(d3.easeExp)\n                .duration(1700)\n            .attr(\"transform\", `translate(0,${yscl(0)})`)\n            .call(x_axis.tickFormat(d3.timeFormat(xFormat)))\n                .selectAll(\"text\")\n                .attr(\"y\", 0)\n                .attr(\"x\", 9)\n                .attr(\"dy\", \".35em\")\n                .attr(\"transform\", \"rotate(90)\")\n                .style(\"text-anchor\", \"start\")\n                .style(\"fill\", \"rgba(255,255,255,1)\")\n                .style(\"opacity\", 1)\n\n\n        svg.select(\".neutral-label\")\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"y\", yscl(0) - 5)\n            .attr(\"x\", 15)\n            .style(\"fill\", \"rgba(0, 0, 0, 0.6)\")\n\n\n        svg.select(\".good-label\")\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"y\", yscl(good) - 5)\n            .attr(\"x\", 15)\n            .attr(\"display\", () => conditionalDisplay(yscl(good), 0, false))\n            .style(\"fill\", \"rgba(0, 0, 0, 0.6)\")\n            // .style(\"fill\", \"rgb(32, 196, 168)\")\n\n        svg.select(\".bad-label\")\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"y\", yscl(bad) + 15)\n            .attr(\"x\", 15)\n            .attr(\"display\", () => conditionalDisplay(yscl(bad), height, true))\n            .style(\"fill\", \"rgba(0, 0, 0, 0.6)\")\n\n\n        // svg.select(\".yaxis\")\n        //     .transition()\n        //     .delay(initialize_duration)\n        //     .ease(d3.easeExp)\n        //     .duration(1700)\n        //     .call(y_axis.tickSizeOuter(5))\n        //     .selectAll(\"text\")\n        //     .style(\"fill\", \"rgba(255,255,255,1)\");\n\n        // svg.select(\".yaxis\")\n        //     .selectAll(\"text\")\n        //     .attr(\"transform\", `translate(-25, -43) rotate(-90)`)\n        //     .attr(\"font-size\", \"15px\")\n        //     .attr(\"letter-spacing\", \"0.12em\")\n        // const area = d3.svg.area()\n        //     .interpolate(\"linear\")\n        //     .x(function () { return 0; })\n        //     .y1(function () { return yscl(good); })\n        //     .y0(function () { return yscl(good); })\n        //     .x1(function () { return width;})\n        \n        svg.append(\"defs\").append(\"clipPath\")\n            .attr(\"id\", \"clip\")\n            .append(\"rect\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n\n        const area = d3.area()\n            .x(function (d) { return xscl(parseTime(d.x))})\n            .y0(height)\n            .y1(yscl(bad))\n\n        const goodArea = d3.area()\n            .x(function (d) { return xscl(parseTime(d.x))})\n            .y0(0)\n            .y1(yscl(good))\n\n        const neutralArea = d3.area()\n            .x(function (d) { return xscl(parseTime(d.x)) })\n            .y0(yscl(good))\n            .y1(yscl(bad))\n\n        svg.select(\".neutral-area\")\n            .data([scatterData])\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"d\", neutralArea)\n            .style(\"fill\", \"rgba(255,255,255,0.1)\")\n\n        svg.select(\".area\")\n            .data([scatterData])\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"d\", area)\n            .style(\"fill\", \"rgba(255,0,0,0.1)\")\n\n        svg.select(\".good-area\")\n            .data([scatterData])\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"d\", goodArea)\n            .style(\"fill\", \"rgba(0,255,0,0.1)\")\n\n\n        svg.select(\".good-line\")\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"x1\", 0)\n            .attr(\"y1\", yscl(good))\n            .attr(\"x2\", width)\n            .attr(\"y2\", yscl(good))\n            .attr(\"display\", () => conditionalDisplay(yscl(good), 0, false))\n            .style(\"stroke\", \"rgba(32, 196, 168,0.3)\")\n            .style(\"stroke-width\", \"2px\")\n\n        svg.select(\".bad-line\")\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"x1\", 0)\n            .attr(\"y1\", yscl(bad) )\n            .attr(\"x2\", width)\n            .attr(\"y2\", yscl(bad))\n            .attr(\"display\", () => conditionalDisplay(yscl(bad), height, true))\n            .style(\"stroke\", \"rgba(200, 0, 0, 0.3)\")\n            .style(\"stroke-width\", \"2px\")\n\n        // const zoom = d3.zoom()\n        //     .scaleExtent([1, 20])\n        //     .extent([[0, 0], [width, height]])\n        //     .on(\"zoom\", updateChart); //sourced from https://www.d3-graph-gallery.com/graph/interactivity_zoom.html\n\n        // d3.select(\".zoom-window\")\n        //     .style(\"pointer-events\", \"painted\")\n        //     .call(zoom)\n\n        // function updateChart() {\n        //     console.log(\"Zooming\")\n        //     const newX = d3.event.transform.rescaleX(xscl)\n        //     const newY = d3.event.transform.rescaleY(yscl)\n\n        //     gX.call(x_axis.scale(newX));\n        //     gY.call(y_axis.scale(newY));\n\n        //     updateDots\n        //         .attr(\"cx\", d => { return newX(parseTime(d.x)) })\n        //         .attr(\"cy\", d => { return newY(d.y) })\n        // }\n\n\n        \n        const close = d3.select(\"#close-modal\");\n        const modal = d3.select(\".instruction-modal\")\n        close\n            .on(\"click\", () => {\n                modal\n                    .style(\"display\", \"none\")\n            });\n\n\n        const createDots = svg.selectAll(\".dot\")\n            .data(scatterData)\n            .enter().append(\"circle\")\n            .attr(\"class\", \"dot\")\n\n        createDots\n            .on(\"click\", function(d){\n                // window.open(d.url, \"_blank\")\n                selectedDot.dot = d3.select(this)\n                fillArticleInfo(singleArticleInfo, d)\n                d3.selectAll(\".dot\")\n                    .style(\"fill\", d => conditionalColor(d, good, bad))\n                    .style(\"opacity\", d => conditionalOpacity(d, good, bad))\n                selectedDot.dot\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"darkblue\");\n                // console.log(selectedDot)\n                // console.log(d)\n\n            })\n            .on(\"dblclick\", d => {\n                window.open(d.url, \"_blank\")\n            })\n            .on(\"mouseover\", function(d,i) {\n                const dot = d3.select(this)\n\n                dot\n                    .transition()\n                    .ease(d3.easeElastic)\n                    .duration(500)\n                    .attr(\"r\", 10)\n\n                dot\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"blue\")\n\n                d3.selectAll(\".article-list-item\")\n                    .style(\"background\", d => conditionalColor(d, good, bad, 0.3));\n                handleArticleScroll(i)\n\n            })\n            .on(\"mouseout\", function(d){\n                const dot = d3.select(this);\n                dot\n                    .transition()\n                    .ease(d3.easeElastic)\n                    .duration(500)\n                    .attr(\"r\", 8)\n\n                dot\n                    .style(\"fill\", d => conditionalColor(d, good, bad))\n                    .style(\"opacity\", d => conditionalOpacity(d, good, bad))\n\n                selectedDot.dot\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"darkblue\");\n\n            })\n\n        createDots\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"cx\", d => { return xscl(parseTime(d.x)) })\n            .attr(\"cy\", d => { return yscl(d.y) })\n            .attr(\"r\", function(d){\n                if (d.title === total.highScore.title) {\n                    selectedDot.dot = d3.select(this)\n                    return 1\n                }\n                return 8\n            })\n            .attr(\"id\", (_,i) => {return \"dot_\" + i})\n            .style(\"opacity\", d => conditionalOpacity(d, good, bad))\n            .style(\"fill\", d => conditionalColor(d, good, bad));\n\n        const articlesContainer = d3.select(\"#articles-list\")\n                                    .selectAll(\"li\")\n                                    .data(scatterData)\n\n        articlesContainer\n            .enter().append(\"li\")\n            .attr(\"class\", \"article-list-item\")\n            .attr(\"id\", (_,i) => {return \"article_\" + i})\n            .style(\"background\", d => conditionalColor(d, good, bad, 0.3))\n            .text( function(d){\n                const date = new Date(new Date(d.x).setDate(new Date(d.x).getDate()+1))\n                const options = { month: 'short', day: 'numeric' }\n                return `${date.toLocaleDateString(\"en-US\", options)}: ${d.title}`\n            })\n            .on(\"click\", function(d,i){\n                selectedDot.dot = d3.select(`#dot_${i}`)\n\n                d3.selectAll(\".dot\")\n                    .style(\"fill\", d => conditionalColor(d, good, bad))\n                    .style(\"opacity\", d => conditionalOpacity(d, good, bad));\n                selectedDot.dot\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"darkblue\");\n                d3.select(`#dot_${i}`)\n                    .attr(\"r\", function (d, i) {\n                        bigDot = d3.select(this)\n                        handleDotUX(d, bigDot, singleArticleInfo, 0.2);\n                        return 20\n                    });\n                // selectedDot.dot\n                //     .style(\"opacity\", 1)\n                //     .style(\"fill\", \"darkblue\");\n                d3.select(`#article_${i}`)\n                    .style(\"background\", \"rgba(0, 0, 139, 0.5)\")\n                // handleArticleScroll(i)\n            })\n            .on(\"dblclick\", d => {\n                window.open(d.url, \"_blank\")\n            })\n            .on(\"mouseover\", function(d,i){\n                d3.selectAll(\".article-list-item\")\n                    .style(\"background\", d => conditionalColor(d, good, bad, 0.3));\n                d3.select(this)\n                    .style(\"background\", \"rgba(0, 0, 139, 0.5)\");\n\n                d3.selectAll(\".dot\")\n                    .style(\"fill\", d => conditionalColor(d, good, bad))\n                    .style(\"opacity\", d => conditionalOpacity(d, good, bad));\n                d3.select(`#dot_${i}`)\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"blue\");    \n                \n                selectedDot.dot\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"darkblue\");\n            \n            })\n            .on(\"mouseout\", () => {\n                d3.selectAll(\".dot\")\n                    .style(\"fill\", (d) => conditionalColor(d, good, bad))\n                    .style(\"opacity\", (d) => conditionalOpacity(d, good, bad));\n\n                selectedDot.dot\n                    .style(\"opacity\", 1)\n                    .style(\"fill\", \"darkblue\");\n\n            })\n\n        d3.selectAll(\".article-list-item\")\n            .transition(\"appear-articles\")\n            .ease(d3.easeCubic)\n            .duration(1500)\n            .style(\"opacity\", 1)\n\n        articlesContainer\n            .style(\"background\", d => conditionalColor(d, good, bad, 0.3))\n            .text(function (d) {\n                const date = new Date(d.x)\n                const options = { month: 'short', day: 'numeric' }\n                return `${date.toLocaleDateString(\"en-US\", options)}: ${d.title}`\n            })\n\n        articlesContainer\n            .exit().remove()\n\n        const updateDots = svg.selectAll(\".dot\")\n            .data(scatterData)\n\n        let bigDot;\n        updateDots\n            .transition()\n            .delay(initialize_duration)\n            .ease(d3.easeExp)\n            .duration(1700)\n            .attr(\"class\", \"dot\")\n            .attr(\"cx\", d => { return xscl(parseTime(d.x)) })\n            .attr(\"cy\", d => { return yscl(d.y) })\n            .attr(\"r\", function (d, i){\n                let r;\n                if (d.title === total.highScore.title) {\n                    bigDot = d3.select(this)\n                    handleDotUX(d, bigDot, singleArticleInfo, 1, initialize_duration);\n                    handleArticleScroll(i)\n                    r = 20\n                } else {\n                    r = 8\n                }\n                return r\n            })\n            .style(\"opacity\", d => conditionalOpacity(d, good, bad) )\n            .style(\"fill\", d => conditionalColor(d, good, bad));\n\n        svg.selectAll(\".dot\")\n            .data(scatterData)\n            .exit().remove();\n    }\n}","const conditionalTitleColor = (total) => {\n    d3.select(\".chart-title\")\n        .data([total])\n        .transition()\n        .ease(d3.easeExp)\n        .duration(2000)\n        .style(\"color\", d => {\n            if (d.average > 0.13) {\n                return `rgba(${32 * Math.sqrt(d.average)}, ${196 * Math.sqrt(d.average)}, ${168 * Math.sqrt(d.average)}, 0.97)`\n            } else if (d.average < -0.13) {\n                return `rgba(${128 * Math.sqrt(Math.abs(d.average))}, ${40 * Math.sqrt(Math.abs(d.average))}, ${40 * Math.sqrt(Math.abs(d.average))}, 0.97)`\n            } else {\n                return `rgba(255,255,255,0.8)`\n            }\n        })\n    d3.select(\"#second-title\")\n        .data([total])\n        .transition()\n        .ease(d3.easeExp)\n        .duration(2000)\n        .style(\"color\", d => {\n            if (d.average > 0.13) {\n                return `rgba(${32 * Math.sqrt(d.average)}, ${196 * Math.sqrt(d.average)}, ${168 * Math.sqrt(d.average)}, 0.97)`\n            } else if (d.average < -0.13) {\n                return `rgba(${128 * Math.sqrt(Math.abs(d.average))}, ${40 * Math.sqrt(Math.abs(d.average))}, ${40 * Math.sqrt(Math.abs(d.average))}, 0.97)`\n            } else {\n                return `rgba(255,255,255,0.8)`\n            }\n        })\n}\n\nconst conditionalDisplay = (attr_value, cutoff, greaterThan = true) => {\n    switch (greaterThan) {\n        case true:\n            if (attr_value > cutoff) {\n                return \"none\"\n            } else {\n                return \"inherit\"\n            }\n        case false:\n            if (attr_value < cutoff) {\n                return \"none\"\n            } else {\n                return \"inherit\"\n            }\n        default:\n            return \"inherit\"\n    }\n}\n\nconst conditionalOpacity = (d, good, bad) => {\n    if (d.y >= good) {\n        return \"0.8\"\n    } else if (d.y <= bad) {\n        return \"0.6\"\n    } else {\n        return \"0.3\"\n    }\n}\n\nconst conditionalColor = (d, good, bad, opacity=1) => {\n    if (d.y >= good) {\n        return `rgba(32,196,168, ${opacity}`\n    } else if (d.y <= bad) {\n        return `rgba(255,0,0, ${opacity}`\n    } else {\n        return `rgba(255,255,255, ${opacity}`\n    }\n}\n\nconst fillArticleInfo = (singleArticleInfo, d) => {\n    singleArticleInfo.select(\".article-title\")\n        .text(\n            `${d.title}`\n    ).transition()\n        .ease(d3.easeExp)\n        .duration(1700)\n        .style(\"color\", \"rgba(255,255,255, 0.5)\");\n    singleArticleInfo.select(\".article-author\")\n        .text(\n            `${d.source}`\n    ).transition()\n        .ease(d3.easeExp)\n        .duration(1700)\n        .style(\"color\", \"rgba(255,255,255, 0.5)\");\n\n    singleArticleInfo.select(\".article-description\")\n        .text(\n            `${d.description}`\n        )\n        .transition()\n        .ease(d3.easeExp)\n        .duration(1700)\n        .style(\"color\", \"rgba(255,255,255, 0.5)\")\n\n    singleArticleInfo.select(\".article-image\")\n        .attr(\"src\", `${d.image}`)\n    singleArticleInfo.select(\".read-more\")\n        .attr(\"href\", `${d.url}`)\n}\n\nconst handleDotUX = (d, bigDot, singleArticleInfo, speed = 1, intialize_duration = 0) => {\n    const delay = 2000 + intialize_duration\n    if (speed >= 1){\n        bigDot\n            .transition()\n            .delay(delay)\n            .ease(d3.easeElastic)\n            .duration(2500)\n            .attr(\"r\", 8)\n            .style(\"fill\", \"darkblue\")\n            .style(\"opacity\", 1);\n        if(speed >= 1){\n                singleArticleInfo\n                .transition()\n                .delay(delay + 500)\n                .duration(800)\n                .style(\"background-color\", \"rgba(0, 0, 139, 0.5)\");\n\n                fillArticleInfo(singleArticleInfo, d);\n\n                singleArticleInfo\n                    .transition()\n                    .delay(delay + 1350)\n                    .duration(800)\n                    .style(\"background-color\", \"transparent\")\n        }\n    } else {\n        bigDot\n            .style(\"fill\", \"darkblue\")\n            .style(\"opacity\", 1);\n        bigDot\n            .transition()\n            .ease(d3.easeLinear)\n            .duration(300)\n            .attr(\"r\", 8)\n        fillArticleInfo(singleArticleInfo, d);\n    }\n}\n\nDate.prototype.addDay = function () {\n    this.setDate(this.getDate() + 1)\n}\n\nconst generateDateRange = (startDate, endDate) => {\n    const dates = []\n    let currentDate = startDate\n    while (currentDate < endDate) {\n        const date = new Date(currentDate)\n        const formattedDate = `${date.getFullYear()}` + \"-\" + `0${date.getMonth() + 1}` + \"-\" + `${date.getDate()}`\n        dates.push({ [formattedDate]: { x: formattedDate, y: null } })\n        currentDate.addDay()\n    }\n    return dates\n}\n\nconst sortDate = (a, b) => {\n    const date1 = new Date(a.x)\n    const date2 = new Date(b.x)\n    if (date1 >= date2) {\n        return 1\n    } else {\n        return -1\n    }\n}\n\nconst mergeLineData = (dateRange, lineData) => {\n    const mergedData = Object.assign([], dateRange, lineData)\n    const unkeyedData = []\n    mergedData.forEach(outerDatum => {\n        unkeyedData.push(Object.values(outerDatum))\n    })\n    return unkeyedData.flat().sort(sortDate)\n}\n\n\n\nconst initialRender = (svg, intialize_duration, total) => {\n\n    d3.select(\"html\")\n        .transition(\"appear\")\n        .ease(d3.easeQuad)\n        .duration(intialize_duration - 1500)\n        .attr(\"background-image\", \"none\" )\n        // .attr(\"background-image\", \"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0))\" )\n\n    d3.select(\"#main\")\n        .transition(\"appear\")\n        .ease(d3.easeQuad)\n        .duration(intialize_duration-1500)\n        .style(\"top\", \"0px\")\n\n\n    d3.select(\".article-image\")\n        .transition(\"appear\")\n        .delay(800)\n        .ease(d3.easeExp)\n        .duration(intialize_duration + 1000)\n        .style(\"opacity\", 1)\n\n    d3.select(\".info-container\")\n        .transition(\"appear\")\n        .delay(800)\n        .ease(d3.easeExp)\n        .duration(intialize_duration+1000)\n        .style(\"opacity\", 1)\n\n    return false\n\n\n}\n\nconst handleArticleScroll = i => {\n    document.getElementById(`article_${i}`).scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\"\n    })\n    \n    d3.select(`#article_${i}`)\n        .style(\"background\", \"rgba(0, 0, 139, 0.5)\")\n\n}\n\nconst conditionalBackgroundColor = (total) => {\n    d3.select(\"html\")\n        .data([total])\n        .transition()\n        .ease(d3.easeQuad)\n        .duration(2000)\n        .style(\"background-color\", d => {\n            if (d.average > 0.13) {\n                return `rgba(${32 * Math.sqrt(d.average)}, ${196 * Math.sqrt(d.average)}, ${168 * Math.sqrt(d.average)}, 0.97)`\n            } else if (d.average < -0.13) {\n                return `rgba(${128 * Math.sqrt(Math.abs(d.average))}, ${40 * Math.sqrt(Math.abs(d.average))}, ${40 * Math.sqrt(Math.abs(d.average))}, 0.97)`\n            } else {\n                return `rgba(50,50,50,0.8)`\n            }\n        })\n}\n\nexport {\n    conditionalBackgroundColor,\n    conditionalTitleColor,\n    conditionalDisplay,\n    conditionalOpacity,\n    conditionalColor,\n    fillArticleInfo,\n    handleDotUX,\n    generateDateRange,\n    sortDate,\n    mergeLineData,\n    initialRender,\n    handleArticleScroll\n}","import { fetchEverythingFor } from './news'\nimport { processData } from './sentiment';\n\n\nexport default (props) => {\n    const form = document.createElement(\"form\");\n    \n    const queryInput = document.createElement(\"input\");\n    queryInput.setAttribute(\"type\", \"text\");\n    queryInput.setAttribute(\"class\", \"query-field\");\n    queryInput.setAttribute(\"z-index\", \"100\");\n\n\n    setTimeout( () =>{\n        typingWord(queryInput);\n    }, 1000)\n    \n    form.appendChild(queryInput)\n    // form.addEventListener(\"input\", () => debouncedTyping(event, props, queryInput))\n    // form.addEventListener(\"submit\", () => { handleTyping(event, props, queryInput)})\n    form.addEventListener(\"submit\", () => {\n        event.preventDefault()\n\n        handleTyping(event, props, queryInput)\n    })\n                            \n    return (\n        form\n    )\n}\n\nconst typingWord = (queryInput) => {\n    const options = [\n        \"Hong Kong\",\n        \"bees\",\n        \"bears\",\n        \"beets\",\n        \"Congress\",\n        \"paper sales\",\n        \"cheese\",\n        \"the news\",\n        \"penguins\",\n        \"the senate\",\n        \"the democratic debate\",\n        \"the 2020 election\",\n        \"SpaceX\",\n        \"artificial intelligence\",\n        \"healthcare\",\n        \"virtual reality\",\n        \"dogs\"\n    ]\n    const str = options[Math.floor(Math.random() * options.length)]\n    let i = 0;\n\n    const cycle = setInterval( function(){\n        const rand = Math.random()\n        if (rand > 0.3) {\n            i++\n            queryInput.setAttribute(\"placeholder\", str.slice(0, i))\n        }\n        if (i >= str.length){\n            queryInput.removeEventListener(\"focus\", clearInput(queryInput, cycle));\n            clearInterval(cycle)\n            setTimeout(()=>{\n                queryInput.setAttribute(\"placeholder\", \"\")\n                typingWord(queryInput)\n            }, 1500)\n        }\n    }, 200)\n    queryInput.addEventListener(\"focus\", clearInput(queryInput, cycle))\n}\n\nconst clearInput = (queryInput, cycle) => () => {\n    clearInterval(cycle)\n    queryInput.setAttribute(\"placeholder\", \"\")\n}\n\nconst handleTyping = (event,props, queryInput) => {\n    event.preventDefault();\n    const chart = props.chart\n    const value = queryInput.value;\n\n    fetchEverythingFor(value)\n        .then(response => {\n            const payload = {}\n            payload.query = value\n            payload.articles = response.articles\n            return payload\n        })\n        .then(payload => processData(payload)) \n        .then((payload) => {\n            chart.render(payload)\n        })\n}\n\n\n// Use for testing functionality, sourced from: https://codeburst.io/throttling-and-debouncing-in-javascript-646d076d0a44\nconst debounce = (delay, fn) => {\n    let timerId;\n    return function (...args) {\n        if (timerId) {\n            clearTimeout(timerId);\n        }\n        timerId = setTimeout(() => {\n            fn(...args);\n            timerId = null;\n        }, delay);\n    }\n}\n\nconst debouncedTyping = debounce(700, handleTyping);","import { news_api_key } from '../config/keys';\n\nconst headlines = 'https://newsapi.org/v2/top-headlines?';\nconst everything = \"https://newsapi.org/v2/everything?\";\nconst addCountry = country => (`country=${country}&`);\nconst addSource = source => (`sources=${source}&`);\nconst addQuery = query => (`q=${query}&`); //searches for query in both title and body\nconst addFrom = start => (`from=${start}&`);\nconst sortBy = option => (`sortBy=${option}&`);\nconst addTo = end => (`to=${end}&`);\nconst addLanguage = ln => (`language=${ln}&`);\nconst addPagesize = int => (`pageSize=${int}&`);\nconst page = int => (`page=${int}&`);\n\nconst apiKey = `apiKey=${news_api_key}`\n\nexport const fetchHeadlines = () => {\n    const url = headlines + addCountry('us') + apiKey;\n    const req = new Request(url);\n    console.log(\"Requesting top 20 headlines!\")\n    return fetch(req)\n            .then(response => console.log(response.json()))    \n};\n\nexport const fetchEverythingFor = (query) => {\n    const url = everything + addQuery(query) + addLanguage('en') + addPagesize(100) + sortBy('relevancy') + apiKey;\n    const req = new Request(url);\n    console.log(`Requesting top 20 articles about ${query}!`)\n    return fetch(req)\n        .then(response => response.json())\n}\n\n\n","export const news_api_key = \"d3a931891c11479eaebaa8adb32af246\"","import Sentiment from 'sentiment'\n\n\nexport const processData = ({articles, value}) => {\n    const payload = {}\n    const sentiment = new Sentiment();\n    const processingData = [];\n    const ratio = 0.6\n\n    articles.forEach(article => {\n        const datum = {}\n        datum.content = article.content || \"\"\n        datum.title = article.title || \"Unnamed\"\n        datum.author = article.author || datum.title\n        datum.source = article.source.name\n        datum.url = article.url\n        datum.image = article.urlToImage\n        datum.description = article.description || \"Unavailable\";\n        \n        const contentSentiment = sentiment.analyze(datum.content)\n        const titleSentiment = sentiment.analyze(datum.title)\n        \n        const comparative = contentSentiment.comparative < 0.08 ? Math.abs(contentSentiment.comparative)/0.75 : contentSentiment.comparative //THIS IS ONLY A PLACEHOLDER, update to more meaningfully accurate metric after basics\n        datum.relevance = Math.round(comparative * 1000)/1000\n        datum.x = article.publishedAt.split(\"T\")[0]\n        const score = (datum.relevance/0.25) * (Math.round(((contentSentiment.score * ratio) + (titleSentiment.score * (1-ratio))) * 1000) /1000);\n        datum.y = Math.round(score * 1000)/1000\n        processingData.push(datum)\n    })\n    payload.scatterData = processingData.sort(sortDateDesc);\n    payload.lineData = averageDayScores(processingData);\n    payload.total = calculateTotals(processingData);\n\n    return payload\n}\n\nconst calculateTotals = data => {\n    const total = {}\n    total.highScore = data[0];\n    data.forEach(datum => {\n        total.score = total.score ? total.score + datum.y : datum.y\n        total.count = total.count ? total.count + 1 : 1\n        total.highScore = Math.abs(datum.y) > Math.abs(total.highScore.y) ? datum : total.highScore\n    })\n    total.average = total.score/total.count;\n    return total\n}\n\nconst averageDayScores = data => {\n    const processedData = {}\n    const count = {}\n    data.forEach(datum => {\n        processedData[datum.x] = processedData[datum.x] ? processedData[datum.x] + datum.y : datum.y;\n        count[datum.x] = count[datum.x] ? count[datum.x] + 1 : 1\n    })\n\n    const averagedData = []\n    Object.keys(processedData).forEach(date => {\n        averagedData.push({[date]: {x: date, y: Math.round((processedData[date] / count[date]) * 1000) / 1000}});\n    })\n    \n    const sortedAveragedData = averagedData.sort(sortDate)\n    return sortedAveragedData\n}\n\nconst sortDate = (a, b) => {\n    const date1 = new Date(a.x)\n    const date2 = new Date(b.x)\n    if (date1 >= date2){ \n        return 1\n    } else {\n        return -1\n    }\n};\n\nconst sortDateDesc = (b, a) => {\n    const date1 = new Date(a.x)\n    const date2 = new Date(b.x)\n    if (date1 >= date2){ \n        return 1\n    } else {\n        return -1\n    }\n}\n\n","var tokenize = require('./tokenize');\nvar languageProcessor = require('./language-processor');\n\n/**\n * Constructor\n * @param {Object} options - Instance options\n */\nvar Sentiment = function (options) {\n    this.options = options;\n};\n\n/**\n * Registers the specified language\n *\n * @param {String} languageCode\n *     - Two-digit code for the language to register\n * @param {Object} language\n *     - The language module to register\n */\nSentiment.prototype.registerLanguage = function (languageCode, language) {\n    languageProcessor.addLanguage(languageCode, language);\n};\n\n/**\n * Performs sentiment analysis on the provided input 'phrase'.\n *\n * @param {String} phrase\n *     - Input phrase\n * @param {Object} opts\n *     - Options\n * @param {Object} opts.language\n *     - Input language code (2 digit code), defaults to 'en'\n * @param {Object} opts.extras\n *     - Optional sentiment additions to AFINN (hash k/v pairs)\n * @param {function} callback\n *     - Optional callback\n * @return {Object}\n */\nSentiment.prototype.analyze = function (phrase, opts, callback) {\n    // Parse arguments\n    if (typeof phrase === 'undefined') phrase = '';\n    if (typeof opts === 'function') {\n        callback = opts;\n        opts = {};\n    }\n    opts = opts || {};\n\n    var languageCode = opts.language || 'en';\n    var labels = languageProcessor.getLabels(languageCode);\n\n    // Merge extra labels\n    if (typeof opts.extras === 'object') {\n        labels = Object.assign(labels, opts.extras);\n    }\n\n    // Storage objects\n    var tokens      = tokenize(phrase),\n        score       = 0,\n        words       = [],\n        positive    = [],\n        negative    = [];\n\n    // Iterate over tokens\n    var i = tokens.length;\n    while (i--) {\n        var obj = tokens[i];\n        if (!labels.hasOwnProperty(obj)) continue;\n        words.push(obj);\n\n        // Apply scoring strategy\n        var tokenScore = labels[obj];\n        // eslint-disable-next-line max-len\n        tokenScore = languageProcessor.applyScoringStrategy(languageCode, tokens, i, tokenScore);\n        if (tokenScore > 0) positive.push(obj);\n        if (tokenScore < 0) negative.push(obj);\n        score += tokenScore;\n    }\n\n    var result = {\n        score:          score,\n        comparative:    tokens.length > 0 ? score / tokens.length : 0,\n        tokens:         tokens,\n        words:          words,\n        positive:       positive,\n        negative:       negative\n    };\n\n    // Handle optional async interface\n    if (typeof callback === 'function') {\n        process.nextTick(function () {\n            callback(null, result);\n        });\n    } else {\n        return result;\n    }\n};\n\nmodule.exports = Sentiment;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*eslint no-useless-escape: \"off\"*/\n\n/**\n * Remove special characters and return an array of tokens (words).\n * @param  {string} input Input string\n * @return {array}        Array of tokens\n */\nmodule.exports = function(input) {\n    return input\n        .toLowerCase()\n        .replace(/\\n/g, ' ')\n        .replace(/[.,\\/#!$%\\^&\\*;:{}=_`\\\"~()]/g, '')\n        .split(' ');\n};\n","var emojis = require('../build/emoji.json');\n\n// English is loaded by default\nvar enLanguage = require('../languages/en/index');\n// Add emojis\nObject.assign(enLanguage.labels, emojis);\n\n// Cache loaded languages\nvar languages = {\n    en: enLanguage\n};\n\nmodule.exports = {\n\n    /**\n     * Registers the specified language\n     *\n     * @param {String} languageCode\n     *     - Two-digit code for the language to register\n     * @param {Object} language\n     *     - The language module to register\n     */\n    addLanguage: function (languageCode, language) {\n        if (!language.labels) {\n            throw new Error('language.labels must be defined!');\n        }\n        // Add emojis\n        Object.assign(language.labels, emojis);\n        languages[languageCode] = language;\n    },\n\n    /**\n     * Retrieves a language object from the cache,\n     * or tries to load it from the set of supported languages\n     *\n     * @param {String} languageCode - Two-digit code for the language to fetch\n     */\n    getLanguage: function(languageCode) {\n        if (!languageCode) {\n            // Default to english if no language was specified\n            return languages.en;\n        }\n        if (!languages[languageCode]) {\n            // Try to load specified language\n            try {\n                // eslint-disable-next-line max-len\n                var language = require('../languages/' + languageCode + '/index');\n                // Add language to in-memory cache\n                this.addLanguage(languageCode, language);\n            } catch (err) {\n                throw new Error('No language found: ' + languageCode);\n            }\n        }\n        return languages[languageCode];\n    },\n\n    /**\n     * Returns AFINN-165 weighted labels for the specified language\n     *\n     * @param {String} languageCode - Two-digit language code\n     * @return {Object}\n     */\n    getLabels: function(languageCode) {\n        var language = this.getLanguage(languageCode);\n        return language.labels;\n    },\n\n    /**\n     * Applies a scoring strategy for the current token\n     *\n     * @param {String} languageCode - Two-digit language code\n     * @param {Array} tokens - Tokens of the phrase to analyze\n     * @param {int} cursor - Cursor of the current token being analyzed\n     * @param {int} tokenScore - The score of the current token being analyzed\n     */\n    applyScoringStrategy: function(languageCode, tokens, cursor, tokenScore) {\n        var language = this.getLanguage(languageCode);\n        // Fallback to default strategy if none was specified\n        // eslint-disable-next-line max-len\n        var scoringStrategy = language.scoringStrategy || defaultScoringStrategy;\n        return scoringStrategy.apply(tokens, cursor, tokenScore);\n    }\n};\n\nvar defaultScoringStrategy = {\n    apply: function(tokens, cursor, tokenScore) {\n        return tokenScore;\n    }\n};\n","var negators = require('./negators.json');\n\nmodule.exports = {\n    apply: function(tokens, cursor, tokenScore) {\n        if (cursor > 0) {\n            var prevtoken = tokens[cursor - 1];\n            if (negators[prevtoken]) {\n                tokenScore = -tokenScore;\n            }\n        }\n        return tokenScore;\n    }\n};\n","var map = {\n\t\"./en/index\": 0\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 17;"],"sourceRoot":""}